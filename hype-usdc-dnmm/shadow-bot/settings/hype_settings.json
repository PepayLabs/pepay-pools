{
  "version": "2",
  "pair": "HYPE/USDC",
  "settings": [
    {
      "id": "dnmm_base",
      "label": "DNMM Base",
      "enableLvrFee": false,
      "kappaLvrBps": 0,
      "enableAOMQ": true,
      "enableRebates": true,
      "maker": { "ttlMs": 1000 },
      "rebates": { "bps": 3, "allowlist": [] }
    },
    {
      "id": "dnmm_lvr_600",
      "label": "DNMM LVR 600bps",
      "enableLvrFee": true,
      "kappaLvrBps": 600,
      "enableAOMQ": true,
      "enableRebates": true,
      "maker": { "ttlMs": 1000 },
      "rebates": { "bps": 3, "allowlist": [] }
    },
    {
      "id": "dnmm_lvr_800",
      "label": "DNMM LVR 800bps",
      "enableLvrFee": true,
      "kappaLvrBps": 800,
      "enableAOMQ": true,
      "enableRebates": true,
      "maker": { "ttlMs": 1000 },
      "rebates": { "bps": 3, "allowlist": [] }
    },
    {
      "id": "dnmm_lvr_1000",
      "label": "DNMM LVR 1000bps",
      "enableLvrFee": true,
      "kappaLvrBps": 1000,
      "enableAOMQ": true,
      "enableRebates": true,
      "maker": { "ttlMs": 1000 },
      "rebates": { "bps": 3, "allowlist": [] }
    },
    {
      "id": "dnmm_no_aomq",
      "label": "DNMM No AOMQ",
      "enableLvrFee": true,
      "kappaLvrBps": 800,
      "enableAOMQ": false,
      "enableRebates": true,
      "maker": { "ttlMs": 1000 },
      "rebates": { "bps": 3, "allowlist": [] }
    },
    {
      "id": "dnmm_no_rebate",
      "label": "DNMM No Rebate",
      "enableLvrFee": true,
      "kappaLvrBps": 800,
      "enableAOMQ": true,
      "enableRebates": false,
      "maker": { "ttlMs": 1000 },
      "rebates": { "bps": 0, "allowlist": [] }
    },
    {
      "id": "dnmm_ttl_1200ms",
      "label": "DNMM TTL 1200ms",
      "enableLvrFee": true,
      "kappaLvrBps": 800,
      "enableAOMQ": true,
      "enableRebates": true,
      "maker": { "ttlMs": 1200 },
      "rebates": { "bps": 3, "allowlist": [] }
    }
  ],
  "runs": [
    {
      "id": "calm_retail",
      "label": "Calm Retail Flow",
      "settings": [
        "dnmm_base",
        "dnmm_lvr_600",
        "dnmm_lvr_800",
        "dnmm_lvr_1000",
        "dnmm_no_aomq",
        "dnmm_no_rebate",
        "dnmm_ttl_1200ms"
      ],
      "featureFlags": {
        "enableSoftDivergence": true,
        "enableSizeFee": false,
        "enableBboFloor": true,
        "enableInvTilt": true,
        "enableAOMQ": false,
        "enableRebates": false,
        "enableLvrFee": false
      },
      "makerParams": {
        "betaFloorBps": 15,
        "alphaBboBps": 2500,
        "S0Notional": 10000,
        "ttlMs": 1000
      },
      "inventoryParams": {
        "invTiltBpsPer1pct": 100,
        "invTiltMaxBps": 150,
        "tiltConfWeightBps": 4000,
        "tiltSpreadWeightBps": 4000
      },
      "aomqParams": {
        "minQuoteNotional": 200,
        "emergencySpreadBps": 120,
        "floorEpsilonBps": 200
      },
      "flow": {
        "pattern": "benign_poisson",
        "seconds": 600,
        "seed": 42,
        "txn_rate_per_min": 20,
        "size_dist": "lognormal",
        "size_params": {
          "mu": 0,
          "sigma": 0.9,
          "min": 50,
          "max": 2500
        }
      },
      "latency": {
        "quote_to_tx_ms": 250,
        "jitter_ms": 50
      },
      "router": {
        "slippage_bps": 30,
        "ttl_sec": 20,
        "minOut_policy": "preview"
      }
    },
    {
      "id": "trend_router",
      "label": "Trend Router Flow",
      "settings": [
        "dnmm_base",
        "dnmm_lvr_600",
        "dnmm_lvr_800",
        "dnmm_lvr_1000",
        "dnmm_no_aomq",
        "dnmm_no_rebate",
        "dnmm_ttl_1200ms"
      ],
      "featureFlags": {
        "enableSoftDivergence": true,
        "enableSizeFee": true,
        "enableBboFloor": true,
        "enableInvTilt": true,
        "enableAOMQ": false,
        "enableRebates": false,
        "enableLvrFee": false
      },
      "makerParams": {
        "betaFloorBps": 15,
        "alphaBboBps": 3000,
        "S0Notional": 15000,
        "ttlMs": 1000
      },
      "inventoryParams": {
        "invTiltBpsPer1pct": 120,
        "invTiltMaxBps": 200,
        "tiltConfWeightBps": 5000,
        "tiltSpreadWeightBps": 5000
      },
      "aomqParams": {
        "minQuoteNotional": 300,
        "emergencySpreadBps": 150,
        "floorEpsilonBps": 200
      },
      "flow": {
        "pattern": "trend",
        "seconds": 600,
        "seed": 43,
        "txn_rate_per_min": 18,
        "size_dist": "lognormal",
        "size_params": {
          "mu": 0.2,
          "sigma": 1.1,
          "min": 50,
          "max": 5000
        }
      },
      "latency": {
        "quote_to_tx_ms": 300,
        "jitter_ms": 60
      },
      "router": {
        "slippage_bps": 25,
        "ttl_sec": 20,
        "minOut_policy": "preview_ladder"
      }
    }
  ],
  "riskScenarios": [
    { "id": "calm", "bbo_spread_bps": [5, 15], "sigma_bps": [5, 20] },
    { "id": "elevated", "bbo_spread_bps": [20, 60], "sigma_bps": [20, 80] },
    {
      "id": "crisis",
      "bbo_spread_bps": [60, 200],
      "sigma_bps": [80, 300],
      "pyth_outages": { "bursts": 3, "secs_each": 20 }
    },
    {
      "id": "oracle_dropout",
      "pyth_drop_rate": 0.02,
      "duration_min": 60,
      "autopause_expected": true
    },
    {
      "id": "latency_spike",
      "quote_latency_ms": 400,
      "ttl_expiry_rate_target": 0.05
    },
    { "id": "spread_widen", "bbo_spread_bps_shift": "+30" }
  ],
  "tradeFlows": [
    { "id": "retail_mixed", "size_dist": "lognorm", "median_base": "S0", "heavytail": true },
    {
      "id": "router_heavy",
      "size_dist": "bimodal",
      "modes": ["2S0", "5S0"],
      "share": { "dnmm": 0.7, "cpmm": 0.2, "stableswap": 0.1 }
    },
    {
      "id": "inst_block",
      "size_dist": "spikes",
      "spike_sizes": ["5S0", "10S0"],
      "interval_min": 20
    }
  ],
  "benchmarks": ["dnmm", "cpmm", "stableswap"],
  "reports": {
    "analyst_summary_md": {
      "sections": [
        "Executive Summary",
        "Methodology & Scenarios",
        "Headline KPIs (by Setting & Benchmark)",
        "Volatility Regimes (Calm/Elevated/Crisis)",
        "Size Buckets (≤S0, 2S0–5S0, ≥5S0)",
        "Edge Attribution: Size/InvTilt/LVR/Floor/Rebate",
        "Risk & Uptime",
        "Recommendation & Next Canary"
      ],
      "highlight_rules": [
        "Flag settings with pnl_per_risk top 2 and router_win_rate > baseline",
        "Flag settings with preview_staleness_ratio > 1%",
        "Flag settings with two_sided_uptime_pct < 99.5%"
      ]
    }
  }
}
